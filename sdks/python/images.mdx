---
title: 'Python 图像生成'
description: 'Python 使用 DALL-E 和 GPT-Image-1 生成和编辑图像'
---

## DALL-E 3 生成图像

```python
from openai import OpenAI

client = OpenAI(api_key="sk-xxx", base_url="https://crazyrouter.com/v1")

response = client.images.generate(
    model="dall-e-3",
    prompt="一只穿着宇航服的猫在月球上散步，数字艺术风格",
    size="1024x1024",
    quality="hd",
    n=1
)

image_url = response.data[0].url
print(f"图片地址: {image_url}")
```

### DALL-E 参数

| 参数 | 可选值 | 说明 |
|------|--------|------|
| `size` | `1024x1024`, `1792x1024`, `1024x1792` | 图片尺寸 |
| `quality` | `standard`, `hd` | 图片质量 |
| `style` | `vivid`, `natural` | 风格 |

## GPT-Image-1 生成图像

```python
response = client.images.generate(
    model="gpt-image-1",
    prompt="一个现代简约风格的 Logo，主题是人工智能",
    size="1024x1024",
    n=1
)

# GPT-Image-1 返回 base64
import base64
image_b64 = response.data[0].b64_json
with open("logo.png", "wb") as f:
    f.write(base64.b64decode(image_b64))
print("图片已保存")
```

## GPT-Image-1 编辑图像

```python
# 图像编辑（需要原图）
response = client.images.edit(
    model="gpt-image-1",
    image=open("original.png", "rb"),
    prompt="把背景改成海滩日落"
)

import base64
with open("edited.png", "wb") as f:
    f.write(base64.b64decode(response.data[0].b64_json))
```

## 下载并保存图片

```python
import requests

response = client.images.generate(
    model="dall-e-3",
    prompt="赛博朋克风格的城市夜景",
    size="1792x1024"
)

# 下载图片
image_url = response.data[0].url
img_data = requests.get(image_url).content
with open("cyberpunk_city.png", "wb") as f:
    f.write(img_data)
print("图片已保存")
```

<Note>
  DALL-E 3 返回 URL（有效期约 1 小时），GPT-Image-1 返回 base64 数据。建议及时下载保存。
</Note>

<Warning>
  图像生成费用较高，建议先用小尺寸测试 prompt 效果，满意后再生成高质量大图。
</Warning>
