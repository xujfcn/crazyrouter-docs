---
title: "Claude 聊天对象"
description: "Anthropic Claude Message 对象和流式事件类型的结构说明"
---

# Claude 聊天对象

Crazyrouter 支持 Anthropic Claude 的原生 Messages API 格式。本页描述 Message 对象和流式事件类型。

## Message 对象

非流式请求返回的完整 Message 对象：

```json
{
  "id": "msg_abc123",
  "type": "message",
  "role": "assistant",
  "content": [
    {
      "type": "text",
      "text": "你好！有什么可以帮助你的吗？"
    }
  ],
  "model": "claude-sonnet-4-20250514",
  "stop_reason": "end_turn",
  "stop_sequence": null,
  "usage": {
    "input_tokens": 15,
    "output_tokens": 20,
    "cache_creation_input_tokens": 0,
    "cache_read_input_tokens": 0
  }
}
```

### 字段说明

| 字段 | 类型 | 说明 |
|------|------|------|
| `id` | string | 消息唯一标识符 |
| `type` | string | 固定为 `message` |
| `role` | string | 固定为 `assistant` |
| `content` | array | 内容块列表，可包含 `text` 和 `tool_use` 类型 |
| `model` | string | 实际使用的模型 |
| `stop_reason` | string | 停止原因：`end_turn`、`max_tokens`、`stop_sequence`、`tool_use` |
| `stop_sequence` | string\|null | 触发停止的序列 |
| `usage` | object | Token 用量 |

### content 块类型

**文本块：**
```json
{
  "type": "text",
  "text": "回复内容"
}
```

**工具调用块：**
```json
{
  "type": "tool_use",
  "id": "toolu_abc123",
  "name": "get_weather",
  "input": {"city": "北京"}
}
```

---

## 流式事件类型

流式响应使用 SSE 格式，包含以下事件类型：

### message_start

流开始时发送，包含 Message 对象（content 为空）：

```
event: message_start
data: {"type":"message_start","message":{"id":"msg_abc123","type":"message","role":"assistant","content":[],"model":"claude-sonnet-4-20250514","stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":15,"output_tokens":0}}}
```

### content_block_start

新内容块开始：

```
event: content_block_start
data: {"type":"content_block_start","index":0,"content_block":{"type":"text","text":""}}
```

### content_block_delta

内容块增量更新：

```
event: content_block_delta
data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"你好"}}
```

### content_block_stop

内容块结束：

```
event: content_block_stop
data: {"type":"content_block_stop","index":0}
```

### message_delta

消息级别更新（包含 stop_reason 和输出 Token 数）：

```
event: message_delta
data: {"type":"message_delta","delta":{"stop_reason":"end_turn","stop_sequence":null},"usage":{"output_tokens":20}}
```

### message_stop

流结束：

```
event: message_stop
data: {"type":"message_stop"}
```

---

## 完整流式事件序列

```
event: message_start
data: {"type":"message_start","message":{...}}

event: content_block_start
data: {"type":"content_block_start","index":0,"content_block":{"type":"text","text":""}}

event: content_block_delta
data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"你好"}}

event: content_block_delta
data: {"type":"content_block_delta","index":0,"delta":{"type":"text_delta","text":"！"}}

event: content_block_stop
data: {"type":"content_block_stop","index":0}

event: message_delta
data: {"type":"message_delta","delta":{"stop_reason":"end_turn","stop_sequence":null},"usage":{"output_tokens":5}}

event: message_stop
data: {"type":"message_stop"}
```

<Note>
  Crazyrouter 完整支持 Anthropic 的原生流式事件格式。你也可以通过 OpenAI 兼容格式（`/v1/chat/completions`）使用 Claude 模型，此时流式格式为标准的 OpenAI SSE 格式。
</Note>
