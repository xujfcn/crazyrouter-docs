---
title: "Gemini 原生格式"
description: "使用 Gemini 原生 API 格式进行文本生成、流式输出和思考模式"
---

# Gemini 原生格式

Crazyrouter 支持 Google Gemini 的原生 API 格式，包括 `generateContent` 和 `streamGenerateContent` 端点。

## 端点

```
POST /v1beta/models/{model}:generateContent
POST /v1beta/models/{model}:streamGenerateContent
```

## 认证

通过 URL 参数传入 API Key：

```
?key=YOUR_API_KEY
```

---

## 文本生成

<CodeGroup>

```bash cURL
curl "https://crazyrouter.com/v1beta/models/gemini-2.5-flash:generateContent?key=YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "contents": [
      {
        "role": "user",
        "parts": [
          {"text": "用简单的语言解释什么是机器学习"}
        ]
      }
    ],
    "generationConfig": {
      "temperature": 0.7,
      "maxOutputTokens": 1024
    }
  }'
```

```python Python
import google.generativeai as genai

genai.configure(
    api_key="YOUR_API_KEY",
    transport="rest",
    client_options={"api_endpoint": "https://crazyrouter.com"}
)

model = genai.GenerativeModel("gemini-2.5-flash")

response = model.generate_content("用简单的语言解释什么是机器学习")

print(response.text)
```

```javascript Node.js
import { GoogleGenerativeAI } from "@google/generative-ai";

const genAI = new GoogleGenerativeAI("YOUR_API_KEY");
// 需要配置自定义 baseURL

const model = genAI.getGenerativeModel({ model: "gemini-2.5-flash" });

const result = await model.generateContent(
  "用简单的语言解释什么是机器学习"
);

console.log(result.response.text());
```

</CodeGroup>

### 响应格式

```json
{
  "candidates": [
    {
      "content": {
        "parts": [
          {
            "text": "机器学习是人工智能的一个分支..."
          }
        ],
        "role": "model"
      },
      "finishReason": "STOP",
      "index": 0
    }
  ],
  "usageMetadata": {
    "promptTokenCount": 12,
    "candidatesTokenCount": 150,
    "totalTokenCount": 162
  }
}
```

---

## 流式生成

<CodeGroup>

```bash cURL
curl "https://crazyrouter.com/v1beta/models/gemini-2.5-flash:streamGenerateContent?key=YOUR_API_KEY&alt=sse" \
  -H "Content-Type: application/json" \
  -d '{
    "contents": [
      {
        "role": "user",
        "parts": [{"text": "写一篇关于人工智能未来的短文"}]
      }
    ]
  }'
```

```python Python
model = genai.GenerativeModel("gemini-2.5-flash")

response = model.generate_content(
    "写一篇关于人工智能未来的短文",
    stream=True
)

for chunk in response:
    print(chunk.text, end="")
```

</CodeGroup>

---

## 多轮对话

```bash cURL
curl "https://crazyrouter.com/v1beta/models/gemini-2.5-flash:generateContent?key=YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "contents": [
      {
        "role": "user",
        "parts": [{"text": "你好，我想学习编程"}]
      },
      {
        "role": "model",
        "parts": [{"text": "你好！学习编程是个很好的选择。你有什么特定的方向吗？"}]
      },
      {
        "role": "user",
        "parts": [{"text": "我想学 Python，从哪里开始？"}]
      }
    ]
  }'
```

---

## 思考模式

Gemini 思考模型支持在回答前进行推理：

```bash cURL
curl "https://crazyrouter.com/v1beta/models/gemini-2.5-flash:generateContent?key=YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "contents": [
      {
        "role": "user",
        "parts": [{"text": "解这个方程：x^3 - 6x^2 + 11x - 6 = 0"}]
      }
    ],
    "generationConfig": {
      "thinkingConfig": {
        "thinkingBudget": 8000
      },
      "maxOutputTokens": 16000
    }
  }'
```

### generationConfig 参数

| 参数 | 类型 | 说明 |
|------|------|------|
| `temperature` | number | 采样温度，0-2 |
| `maxOutputTokens` | integer | 最大输出 Token 数 |
| `topP` | number | 核采样参数 |
| `topK` | integer | Top-K 采样 |
| `stopSequences` | array | 停止序列 |
| `responseMimeType` | string | 响应 MIME 类型，如 `application/json` |
| `responseSchema` | object | JSON Schema 约束输出格式 |
| `thinkingConfig` | object | 思考模式配置 |

<Note>
  Gemini 原生格式使用 `contents` 数组和 `parts` 结构，与 OpenAI 的 `messages` 格式不同。如果你更习惯 OpenAI 格式，可以使用 [Gemini OpenAI 兼容格式](/chat/gemini/openai-compat)。
</Note>
